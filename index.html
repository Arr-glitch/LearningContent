<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive English Learning Book</title>
    <link rel="stylesheet" href="./assets/styles.css">
    <meta name="description" content="Interactive English learning platform with comprehensive lessons and quizzes">
    <meta name="keywords" content="English learning, interactive lessons, grammar, vocabulary, quizzes">
</head>
<body>
    <div id="app">
        <!-- User Panel -->
        <div class="user-panel" id="user-panel">
            <div class="user-info" id="user-info">
                <div class="user-avatar" id="user-avatar">G</div>
                <span id="user-name">Guest</span>
                <button class="btn" id="auth-btn" style="margin-left: 1rem; padding: 0.5rem 1rem; font-size: 0.8rem;">Login</button>
            </div>
        </div>

        <!-- Header with Progress -->
        <div class="header">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="score-display">
                    <div class="score-item">
                        <span class="score-label">Score</span>
                        <span class="score-value" id="total-score">0</span>
                    </div>
                    <div class="score-item">
                        <span class="score-label">Accuracy</span>
                        <span class="score-value" id="accuracy">0%</span>
                    </div>
                    <div class="score-item">
                        <span class="score-label">Completed</span>
                        <span class="score-value" id="chapters-completed">0/0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Card -->
        <div class="card fade-in">
            <!-- Loading State -->
            <div class="loading" id="loading-state">
                <div class="spinner"></div>
            </div>

            <!-- Error State -->
            <div class="error-message" id="error-state" style="display: none;">
                <h3>Unable to Load Content</h3>
                <p>Please check your internet connection and Firebase configuration.</p>
                <button class="btn primary" onclick="location.reload()">Retry</button>
            </div>

            <!-- Main Content -->
            <div id="main-content" style="display: none;">
                <h1 id="chapter-title">Welcome to Interactive English Learning</h1>
                
                <!-- Lesson Content -->
                <div id="lesson-content">
                    <div class="lesson-section">
                        <h3>Lesson</h3>
                        <p id="lesson-text">Loading lesson content...</p>
                    </div>
                    
                    <div class="lesson-section" id="explanation-section">
                        <h3>Explanation</h3>
                        <p id="explanation-text"></p>
                    </div>
                    
                    <div class="examples-list" id="examples-section">
                        <h4>Examples</h4>
                        <ul id="examples-list"></ul>
                    </div>
                </div>

                <!-- Question Area -->
                <div id="question-area">
                    <div class="question-container" id="question-container">
                        <div class="question-title">
                            Question <span id="question-number">1</span> of <span id="total-questions">5</span>
                        </div>
                        <div class="question-text" id="question-text">
                            Loading question...
                        </div>
                        
                        <!-- Multiple Choice Options -->
                        <div class="options-container" id="options-container" style="display: none;">
                        </div>
                        
                        <!-- Fill in the Blank -->
                        <div id="fill-blank-container" style="display: none;">
                            <div class="question-text" id="fill-blank-question"></div>
                            <input type="text" class="fill-blank-input" id="fill-blank-input" placeholder="Type your answer...">
                        </div>
                        
                        <!-- Drag and Drop -->
                        <div class="drag-drop-container" id="drag-drop-container" style="display: none;">
                            <div class="drag-items" id="drag-items"></div>
                            <div class="drop-zone" id="drop-zone">
                                <span style="opacity: 0.5;">Drag items here to form the correct order</span>
                            </div>
                        </div>
                        
                        <!-- Matching Pairs -->
                        <div class="matching-container" id="matching-container" style="display: none;">
                            <div class="matching-column" id="left-column"></div>
                            <div class="matching-column" id="right-column"></div>
                        </div>
                        
                        <!-- Reading Passage -->
                        <div id="reading-container" style="display: none;">
                            <div class="reading-passage" id="reading-passage"></div>
                            <div class="options-container" id="reading-options"></div>
                        </div>
                        
                        <!-- Feedback -->
                        <div class="feedback" id="feedback" style="display: none;"></div>
                        
                        <!-- Action Buttons -->
                        <div class="action-buttons">
                            <button class="btn primary" id="submit-answer">Submit Answer</button>
                            <button class="btn" id="next-question" style="display: none;">Next Question</button>
                            <button class="btn" id="show-explanation" style="display: none;">Show Explanation</button>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="navigation-buttons">
                    <button class="btn" id="prev-chapter">← Previous Chapter</button>
                    
                    <div class="chapter-selector" id="chapter-selector">
                        <!-- Chapter dots will be generated dynamically -->
                    </div>
                    
                    <button class="btn" id="next-chapter">Next Chapter →</button>
                </div>

                <!-- Additional Controls -->
                <div class="action-buttons" style="margin-top: 2rem;">
                    <button class="btn" id="reset-progress">Reset Progress</button>
                    <button class="btn success" id="complete-chapter" style="display: none;">Complete Chapter</button>
                </div>
            </div>
        </div>

        <!-- Authentication Modal (will be added via JavaScript) -->
        <div id="auth-modal" style="display: none;"></div>

        <!-- Firebase SDKs - Loaded from CDN as traditional scripts -->
        <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>

        <!-- Your main application script - Loaded as a module -->
        <script type="module" src="./assets/script.js"></script>
    </body>
    </html>
